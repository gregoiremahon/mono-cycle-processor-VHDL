library ieee;
use ieee.std_logic_1164.all;
use ieee.numeric_std.all;

entity testbench_Processing_Unit is
end entity testbench_Processing_Unit;

architecture behavior of testbench_Processing_Unit is
    -- Component declaration for the DUT
    component processingUnit is
        port (
            clk, rst: in std_logic;
            instruction: in std_logic_vector(31 downto 0);
            dataOut: out std_logic_vector(31 downto 0)
        );
    end component processingUnit;

    -- Signals
    signal clk_tb, rst_tb: std_logic := '0';
    signal instruction_tb: std_logic_vector(31 downto 0);
    signal dataOut_tb: std_logic_vector(31 downto 0);

begin
    -- Component instantiation
    DUT : processingUnit port map(
        clk => clk_tb,
        rst => rst_tb,
        instruction => instruction_tb,
        dataOut => dataOut_tb
    );

    -- Clock generation
    clk_tb <= not clk_tb after 5 ns;

    stimulus_process : process
    begin
        -- Reset generation
        rst_tb <= '1';
        wait for 10 ns;
        rst_tb <= '0';
        wait for 10 ns;

        -- Testcase 1: R(1) = R(15)
        instruction_tb <= x"EE0B0000"; -- Move register 15 to register 1
        wait until rising_edge(clk_tb);
        assert dataOut_tb = x"0000EEEE" report "Testcase 1 failed" severity error;
        wait for 50 ns;

        -- Testcase 2: R(1) = R(1) + R(15)
        instruction_tb <= x"EE0B0010"; -- Add register 15 to register 1
        wait until rising_edge(clk_tb);
        assert dataOut_tb = x"0001EEEE" report "Testcase 2 failed" severity error;
        wait for 50 ns;

        -- Testcase 3: R(2) = R(1) + R(15)
        instruction_tb <= x"EE0B0210"; -- Add register 15 to register 1 and store result in register 2
        wait until rising_edge(clk_tb);
        assert dataOut_tb = x"0001EEEE" report "Testcase 3 failed" severity error;
        wait for 50 ns;

        -- Testcase 4: R(3) = R(1) ? R(15)
        instruction_tb <= x"CE0B0310"; -- Subtract register 15 from register 1 and store result in register 3
        wait until rising_edge(clk_tb);
        assert dataOut_tb = x"EEEE1111" report "Testcase 4 failed" severity error;
        wait for 50 ns;

        -- Testcase 5: R(5) = R(7) ? R(15)
        instruction_tb <= x"8E0F0510"; -- Subtract register 15 from register 


-- End simulation
wait;
end process stimulus_process;
end architecture;

